<!DOCTYPE html>
<html lang="ja"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ホーム画面</title>
<link rel="manifest" href="manifest.json" />
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js')
        .then(reg => console.log('Service worker registered.', reg))
        .catch(err => console.error('Service worker registration failed:', err));
    });
  }
</script>
<style>
    body {
      background-color: #1e1e1e;
      color: white;
      margin: 0;
      padding-bottom: 60px; /* to prevent footer overlap */
    }
    header {
      background-color: #111111;
      padding: 12px 16px;
      border-bottom: 1px solid #1a1a1a;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    header h1 {
      margin: 0;
      font-size: 20px;
    }
    footer {
      position: fixed;
      bottom: 0;
      width: 100%;
      background-color: #111111;
      border-top: 1px solid #1a1a1a;
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 8px 0;
    }
    .section {
      margin: 16px;
    }
    .section h2 {
      font-size: 16px;
      margin-bottom: 8px;
    }
    .thread-card {
      background-color: #2c2c2c;
      padding: 10px;
      margin-bottom: 8px;
      border-radius: 4px;
    }
    .meta {
      font-size: 12px;
      color: #ccc;
      margin-bottom: 4px;
    }
    .content {
      font-size: 14px;
    }
  </style>
<!-- サンプル: メッセージ画面（message.html想定） -->
</head><body><div id="home-screen">
<header>
<h1>ホーム</h1>
</header>
<div class="section" id="recommended-threads">
<h2>おすすめのスレ</h2>
<div class="thread-card">
<div class="meta">匿名・2025/08/22</div>
<div class="content">今日も夜ヒマな人〜🥺雑談しよ！</div>
</div>
<div class="thread-card">
<div class="meta">匿名・2025/08/21</div>
<div class="content">深夜テンション語りたい人集合🔥</div>
</div>
</div>
<div class="section" id="popular-threads">
<h2>人気のスレッド</h2>
<div class="thread-card">
<div class="meta">匿名・2025/08/20</div>
<div class="content">推しについて語る会🎤</div>
</div>
<div class="thread-card">
<div class="meta">匿名・2025/08/19</div>
<div class="content">寝れない人雑談しよ🌙</div>
</div>
</div>
<div class="section" id="news">
<h2>運営からのお知らせ</h2>
<div class="thread-card">
<div class="meta">2025/08/20</div>
<div class="content">現状左の投稿ページの修正中です</div>
</div>
</div>
<footer style="position: fixed; bottom: 0; width: 100%; background-color: #111111; border-top: 1px solid #1a1a1a; display: flex; justify-content: space-around; align-items: center; padding: 8px 0; z-index: 9999;">
  <div onclick="location.href='search.html'" style="color: #bbb; font-size: 18px;">🔍</div>
  <div onclick="location.href='chat.html'" style="color: #bbb; font-size: 18px;">✉️</div>
  <div onclick="location.href='home.html'" style="background-color: black; border-radius: 50%; padding: 6px;">
    <div style="color: white; font-size: 20px;">🏠</div>
  </div>
  <div onclick="location.href='thread.html'" style="color: #bbb; font-size: 18px;">🧵</div>
  <div onclick="location.href='settings.html'" style="color: #bbb; font-size: 18px;">⚙️</div>
</footer>
<script>
  function goTo(page) {
    window.location.href = page;
  }
</script>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

    const firebaseConfig = {
      // TODO: Replace with your Firebase config
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.createThread = async function () {
      const name = document.getElementById('thread-name-input').value.trim();
      const desc = document.getElementById('thread-desc-input').value.trim();

      if (!name) {
        alert("スレッド名を入力してください");
        return;
      }

      try {
        await addDoc(collection(db, "threads"), {
          name,
          description: desc,
          createdAt: serverTimestamp()
        });
        closeThreadModal();
        location.reload(); // Refresh to show the new thread
      } catch (e) {
        console.error("Error adding thread: ", e);
        alert("スレッドの作成に失敗しました");
      }
    };

    window.openThreadModal = function () {
      document.getElementById('thread-modal').style.display = 'flex';
    };

    window.closeThreadModal = function () {
      document.getElementById('thread-modal').style.display = 'none';
    };
  </script>
</body></html>